## 修复计划概览

### Phase 1: 高风险问题修复（P0）
1. **修复 useCover() 异步问题** [src/class/Track.js:271-277]
   - 添加 async/await
   - 正确处理 Promise 返回值

2. **提取通用响应处理函数** [src/api/musicSource/musicResource.js]
   - 创建 `processBinaryResponse()` 工具函数
   - 替换三个重复的处理逻辑

3. **加强空值检查** [src/stores/player.js]
   - 添加更严格的 null/undefined 检查

### Phase 2: 代码结构优化（P1）
4. **重构 getCoverResource()** [src/class/Track.js:186-265]
   - 提取为多个小函数
   - 减少嵌套层级

5. **优化 lyricLinesData computed** [src/components/player/AMLLyrics.vue:147-244]
   - 提取歌词转换逻辑为独立函数
   - 使用早期返回减少嵌套

6. **合并 YRC/QRC 解析逻辑** [src/utils/lyricConverter.js]
   - 提取通用逐字解析函数

7. **清理调试日志** [src/composables/useCoverImage.js]
   - 删除或条件化 console.log

8. **统一错误处理** [src/stores/player.js]
   - 创建错误通知机制

### Phase 3: 代码质量提升（P2）
9. **提取 SVG 图标为常量** [src/components/player/PlayerControls.vue]
10. **删除注释代码** [src/js/resourceManager.js]
11. **移除混合模块系统** [src/js/resourceManager.js]
12. **提取魔法数字为常量**

### 验证步骤
- 运行 ESLint 检查
- 运行类型检查（如有）
- 手动测试播放器核心功能
- 验证歌词显示功能

### 预计修改文件
- src/class/Track.js
- src/api/musicSource/musicResource.js
- src/stores/player.js
- src/components/player/AMLLyrics.vue
- src/utils/lyricConverter.js
- src/composables/useCoverImage.js
- src/components/player/PlayerControls.vue
- src/js/resourceManager.js

请确认此计划后，我将开始执行修复。