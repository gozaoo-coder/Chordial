## 修复计划

### Phase 1: 修复严重问题 (P0)
1. **修复死锁风险** - 重构 `analyzer.rs` 的 `batch_analyze`，避免在并行迭代器中持锁
2. **统一锁获取顺序** - 在 `mixer.rs` 中添加文档说明锁顺序，并检查所有位置
3. **替换 unwrap** - 在音频线程中将 `unwrap()` 替换为安全的错误处理

### Phase 2: 修复中等问题 (P1)
4. **修正 Biquad 滤波器系数** - 修复 `eq_filter.rs` 中的 `a2` 系数计算
5. **消除魔法数字** - 提取常量定义
6. **修复 seek 截断问题** - 添加负数检查

### Phase 3: 代码优化 (P2)
7. **删除未使用代码** - 清理未使用的导入、变量、结构体
8. **简化重复代码** - 使用泛型重构 `cpal_output.rs`
9. **补充测试** - 完善空测试用例

### 验证步骤
- 运行 `cargo check` 检查语法
- 运行 `cargo test` 确保测试通过
- 运行 `cargo clippy` 检查 lint 警告